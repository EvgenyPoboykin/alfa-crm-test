(this["webpackJsonpalfa-crm-test"]=this["webpackJsonpalfa-crm-test"]||[]).push([[12],{22:function(e,n,t){"use strict";var r=t(0),a=t.n(r),c=t(7),o=t(8);t(36);function i(){var e=Object(c.a)(["\n    width: 100%;\n    height: 100;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return i=function(){return e},e}var s=o.a.div.attrs({className:"LoaderPage__container"})(i()),u=t(24),l=Object(r.memo)((function(){return a.a.createElement(s,null,a.a.createElement(u.a,null))}));n.a=l},24:function(e,n,t){"use strict";var r=t(0),a=t.n(r),c=t(7),o=t(8);t(39);function i(){var e=Object(c.a)(["\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 24px;\n    height: 24px;\n    border: 4px solid #fff;\n    border-radius: 50%;\n    animation: "," 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    border-color: #fff transparent transparent transparent;\n\n    &:nth-child(1) {\n        animation-delay: -0.45s;\n    }\n    &:nth-child(2) {\n        animation-delay: -0.3s;\n    }\n    &:nth-child(3) {\n        animation-delay: -0.15s;\n    }\n"]);return i=function(){return e},e}function s(){var e=Object(c.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    width: 40px;\n    height: 30px;\n"]);return s=function(){return e},e}function u(){var e=Object(c.a)(["\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n"]);return u=function(){return e},e}var l=Object(o.b)(u()),f=o.a.div.attrs({className:"Loader__container"})(s()),d=o.a.div.attrs({className:"Loader__container--div"})(i(),l),m=Object(r.memo)((function(){return a.a.createElement(f,null,a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null))}));n.a=m},30:function(e,n,t){e.exports=t(45)},35:function(e,n,t){},36:function(e,n){},39:function(e,n){},45:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(25),o=t.n(c),i=(t(35),t(21)),s=t(22),u=t(5),l=t(29),f=t(6),d=t.n(f),m=t(4),h=t(15),p=t(14),b="".concat("https://test.s20.online/").concat("v2api/","auth/login"),v="".concat("https://test.s20.online/").concat("v2api/","customer/index"),g="".concat("https://test.s20.online/").concat("v2api/","customer/create"),O=function(e,n){return{method:"POST",body:JSON.stringify({email:e,api_key:n})}},j=function(e){return{method:"POST",headers:{"X-ALFACRM-TOKEN":e}}},k=function(e,n){return{method:"POST",headers:{"X-ALFACRM-TOKEN":e},body:JSON.stringify(n)}},w=function(e){var n=e.children,t=function(){var e=Object(r.useState)(u.d),n=Object(p.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(u.c),o=Object(p.a)(c,2),i=o[0],s=o[1],f=Object(r.useState)(""),w=Object(p.a)(f,2),x=w[0],y=w[1],E=function(){var e=Object(h.a)(d.a.mark((function e(){var n,r,c,o,i,s,u,l,f,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,r=t.password,a((function(e){return Object(m.a)({},e,{fetching:!0})})),""!==t.token){e.next=21;break}return c=O(n,r),e.next=6,fetch(b,c);case 6:return o=e.sent,e.next=9,o.json();case 9:return i=e.sent,s=j(i.token),e.next=13,fetch(v,s);case 13:return u=e.sent,e.next=16,u.json();case 16:l=e.sent,localStorage.setItem("token",i.token),a((function(e){return Object(m.a)({},e,{fetching:!1,token:i.token,redirect:!0,email:"",password:"",items:l.items})})),e.next=29;break;case 21:return console.log("fetching with login"),e.next=24,fetch(v,j(t.token));case 24:return f=e.sent,e.next=27,f.json();case 27:h=e.sent,a((function(e){return Object(m.a)({},e,{fetching:!1,redirect:!0,email:"",password:"",items:h.items})}));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(d.a.mark((function e(n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.email,a=t.password,n.preventDefault(),""===r&&""===a||E();case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=Object(h.a)(d.a.mark((function e(n){var r,c,o,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=Object(m.a)({},i),c=[].concat(Object(l.a)(t.items),[r]),e.next=5,fetch(g,k(t.token,r));case 5:return o=e.sent,e.next=8,o.json();case 8:f=e.sent,console.log({rawData:o,data:f}),f.success&&(a((function(e){return Object(m.a)({},e,{items:c,dialog:!1})})),s(u.c),console.log(f));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=localStorage.getItem("token");null!==e&&a((function(n){return Object(m.a)({},n,{token:e})}))}),[]),{appstate:t,userstate:i,setSearch:y,setUserState:s,setAppState:a,onSubmitAuth:S,onPressEnterSubmitAuth:function(e){var n=t.email,r=t.password;"Enter"!==e.key||""===n&&""===r||E()},onClickCancel:function(e){e.preventDefault(),s(u.c),a((function(e){return Object(m.a)({},e,{dialog:!1})}))},onClickSearch:function(){x&&console.log(x)},AddUser:_}}();return a.a.createElement(u.b,{value:t},a.a.createElement(r.Suspense,{fallback:a.a.createElement(s.a,null)},n))},x=Object(r.lazy)((function(){return t.e(15).then(t.bind(null,80)).then((function(e){return{default:e.Routers}}))})),y=function(){return a.a.createElement(w,null,a.a.createElement(i.a,null,a.a.createElement(x,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return o})),t.d(n,"d",(function(){return i})),t.d(n,"c",(function(){return s}));var r=t(0),a=t.n(r),c=Object(r.createContext)(null),o=function(e){var n=e.children,t=e.value;return a.a.createElement(c.Provider,{value:t},n)},i={items:[],email:"",password:"",rememberMe:!1,fetching:!1,token:"",redirect:!1,dialog:!1},s={name:"",dob:"",phone:[],email:[],addr:[],branch_ids:[1],legal_type:1,is_study:0}}},[[30,13,14]]]);
//# sourceMappingURL=main.afb33b30.chunk.js.map